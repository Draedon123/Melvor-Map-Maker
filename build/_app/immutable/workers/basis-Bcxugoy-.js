!function(){"use strict";self.addEventListener("message",(async e=>{const t=await(0,eval)(e.data.basisEncoderJS)();if("encode"!==e.data.mode);else{const{BasisEncoder:s,initializeBasis:a}=t;for(const{name:t,image:n}of e.data.data){const e=new Uint8Array(await n.arrayBuffer());a();const i=new Uint8Array(10485760),o=new s;o.setSliceSourceImage(0,e,0,0,1),o.setComputeStats(0),o.setPerceptual(1),o.setMipSRGB(1),o.setQualityLevel(255),o.setUASTC(1),o.setMipGen(0);const r=o.encode(i),c=new Uint8Array(i.buffer,0,r);if(o.delete(),0===r)return void postMessage({status:"error",reason:"Failed to convert image to .basis"});postMessage({status:"success",name:t,data:c})}}}))}();