import{c as Bt,a as n,t as D,d as L,b as te}from"../chunks/disclose-version.pAZcs84n.js";import{h as oe,a as Tt,f as bt,b as Wt,az as Xt,j as Yt,w as Ut,c as Gt,e as wt,s as Mt,k as Vt,aN as Kt,p as Qt,g as zt,u as Zt,W as F,X as B,Y as o,_ as r,a1 as M,$ as Y,O as E,a0 as V,Z as $,a4 as w,a5 as h,R as Dt,a2 as Et,a3 as N,aO as Jt,aP as ea,N as ta}from"../chunks/utils.BRJKUTqf.js";import{h as aa}from"../chunks/svelte-head.Bh-irVxV.js";import{a as H,c as b,g as At,h as ra,i as na,s as ft}from"../chunks/imageUtils.CboFgM1z.js";import{p as X,a as j}from"../chunks/props.BlxC-9-v.js";import{b as le}from"../chunks/this.BvguKOfU.js";import{d as Z,s as Je,e as ie,f as z,i as O}from"../chunks/store.BTSVGJLy.js";import{s as W,S as sa}from"../chunks/store.CkECtnRM.js";import{D as Nt}from"../chunks/Dialog.ByOQsEJR.js";import{o as Rt}from"../chunks/index-client.DGISRjzp.js";import{T as oa,a as Pt}from"../chunks/ToolbarItem.C0umnPDF.js";import{s as ve}from"../chunks/render.j7FqK5Uc.js";import{t as De,b as T,s as St,a as la}from"../chunks/input.IcoeKV5q.js";import{D as ia,P as ua}from"../chunks/DragDropUpload.By2bqb05.js";import{e as xe,i as Ze}from"../chunks/each.DdoAzWFW.js";import{b as ue}from"../chunks/paths.BXsdQ0-J.js";import{d as va}from"../chunks/index.DRsDyc71.js";import{s as mt}from"../chunks/store.cGEaFj6u.js";function Lt(f,t,e,a,d,l){let s=oe;oe&&Tt();var i,p,u=null;oe&&bt.nodeType===1&&(u=bt,Tt());var g=oe?bt:f,c;Wt(()=>{const v=t()||null;var _=v==="svg"?Kt:null;v!==i&&(c&&(v===null?Qt(c,()=>{c=null,p=null}):v===p?zt(c):Zt(c)),v&&v!==p&&(c=Yt(()=>{if(u=oe?u:_?document.createElementNS(_,v):document.createElement(v),Bt(u,u),a){var y=oe?Ut(u):u.appendChild(Gt());oe&&(y===null?wt(!1):Mt(y)),a(u,y)}Vt.nodes_end=u,g.before(u)})),i=v,i&&(p=i))},Xt),s&&(wt(!0),Mt(g))}var ca=(f,t)=>{const e=parseInt(f.currentTarget.value);z(W,E(t).hexesX=isNaN(e)?1:Math.max(Math.floor(e),1),E(t))},da=(f,t)=>{const e=parseInt(f.currentTarget.value);z(W,E(t).hexesY=isNaN(e)?1:Math.max(Math.floor(e),1),E(t))},pa=D('<div class="dialog svelte-sbs6ii"><h1 class="svelte-sbs6ii">Hex Count</h1> <br class="svelte-sbs6ii"> <label for="hexesX" class="svelte-sbs6ii">X:</label> <input id="hexesX" name="hexesX" type="number" class="svelte-sbs6ii"> <br class="svelte-sbs6ii"> <label for="hexesY" class="svelte-sbs6ii">Y:</label> <input id="hexesY" name="hexesY" type="number" class="svelte-sbs6ii"></div>');function ma(f,t){F(t,!0);const e=Je(),a=()=>ie(W,"$store",e),d={modal:null};let l=V(void 0);const s={x:a().hexesX,y:a().hexesY};return W.subscribe(({hexesX:i,hexesY:p})=>{a().viewport===null||s.x===i&&s.y===p||(a().hexGridLayer.populate(a().mapDimensions,a().viewport,i,p),s.x=i,s.y=p)}),Rt(()=>{o(l)!==void 0&&(d.modal=o(l))}),le(Nt(f,{children:(i,p)=>{var u=pa(),g=r(M(u),6);b(g),H(g,"min",1),H(g,"step",1),g.__change=[ca,a];var c=r(g,6);b(c),H(c,"min",1),H(c,"step",1),c.__change=[da,a],w(u),Y(()=>{At(g,a().hexesX),At(c,a().hexesY)}),n(i,u)},$$slots:{default:!0}}),i=>$(l,X(i)),()=>o(l)),B({exports:d})}Z(["change"]);var fa=D(`<p class="svelte-vmuffc">Drag and drop your .basis files here (in 1 go), or click to upload a
        file.</p> <span class="error svelte-vmuffc"> </span>`,1),_a=D('<div class="dialog svelte-vmuffc"><h1 class="svelte-vmuffc">Upload Map Images</h1> <p class="svelte-vmuffc">The map images must be in the format: tile_(x)_(y)@(1x OR 0.5x).basis</p> <p class="svelte-vmuffc">ie, tile_3_5@0.5x.basis</p> <!> <div class="progress-bar svelte-vmuffc"><!></div></div>');function ha(f,t){F(t,!0);const e=Je(),a=()=>ie(W,"$store",e),d={modal:null};let l=V(void 0),s=V(""),i=V(void 0);const p=/^tile_\d+_\d+@(1|0.5)x\.basis$/;async function u(g){var C;if($(s,""),a().viewport===null){$(s,"Error: App is not initialised. This shouldn't happen...");return}if(g.length===0)return;const c=(C=g.find(m=>!p.test(m.name)))==null?void 0:C.name;if(c!==void 0){$(s,`Invalid file name: ${c}`);return}const v=g.map(m=>{const x=m.name.slice(0,-7).split(/_|@/g),A=parseInt(x[1]),S=parseInt(x[2]),P=parseInt(x[3]);return{x:A,y:S,resolution:P}}),_=Math.max(...v.map(m=>m.x))+1,y=Math.max(...v.map(m=>m.y))+1;if(v.length!==_*y){const m=[];for(let x=0;x<_;x++)for(let A=0;A<y;A++)v.find(S=>S.x===x&&S.y===A)===void 0&&m.push({x,y:A});$(s,`Some tiles are missing. First, do you intend to have ${_}x${y} tiles? If so, then you are missing these tiles: ${m.map(x=>`(${x.x},${x.y})`).join(", ")}`);return}const I=await ra(g.map(m=>({file:m,name:m.name})),2,m=>{var x;(x=o(i))==null||x.set(m)});z(W,E(a).mapDimensions={x:I.tileWidth*_,y:I.tileHeight*y},E(a));const k=I.tiles.map(m=>{const x=sa.from(na(m.image));return x.x=m.x*I.tileWidth,x.y=m.y*I.tileHeight,x.cullable=!0,x.label=`Tile (${m.x}, ${m.y})`,x});a().viewport.children.forEach(m=>{console.log(m,m.removeChildren),m.removeChildren().forEach(x=>x.destroy())}),a().backgroundLayer.addChild(...k),z(W,E(a).viewport.worldWidth=a().mapDimensions.x,E(a)),z(W,E(a).viewport.worldHeight=a().mapDimensions.y,E(a)),a().viewport.centerViewport(),a().hexGridLayer.populate(a().mapDimensions,a().viewport,a().hexesX,a().hexesY)}return Rt(()=>{o(l)!==void 0&&(d.modal=o(l))}),le(Nt(f,{children:(g,c)=>{var v=_a(),_=r(M(v),6);ia(_,{mimeType:".basis",multiple:!0,onFileUpload:u,children:(k,C)=>{var m=fa(),x=r(h(m),2),A=M(x,!0);w(x),Y(()=>ve(A,o(s))),n(k,m)},$$slots:{default:!0}});var y=r(_,2),I=M(y);le(ua(I,{containerStyles:{"border-color":"red"}}),k=>$(i,X(k)),()=>o(i)),w(y),w(v),Y(()=>{var k;return De(y,"hidden",(((k=o(i))==null?void 0:k.value)??0)===0)}),n(g,v)},$$slots:{default:!0}}),g=>$(l,X(g)),()=>o(l)),B({exports:d})}let ga=0;function ya(){return ga++}function ba(f,t,e){z(W,E(t).propertiesMenu.activeTab=e,E(t))}var xa=D('<input type="image" class="svelte-1mndwfc"> <div class="svelte-1mndwfc"><!></div>',1);function Ht(f,t){F(t,!0);const e=Je(),a=()=>ie(W,"$store",e),d=ya();var l=xa(),s=h(l);s.__click=[ba,a,d];var i=r(s,2),p=M(i);return ft(p,()=>t.children??Dt),w(i),Y(()=>{H(s,"src",t.imageSRC),H(s,"alt",t.imageAltText),De(s,"active",d===a().propertiesMenu.activeTab),De(i,"hidden",d!==a().propertiesMenu.activeTab)}),n(f,l),B({id:d})}Z(["click"]);function Da(f,t){const e=parseFloat(f.currentTarget.value);isNaN(e)&&t(0)}var Ia=D('<input type="number" class="svelte-1ni6ltu">'),ka=D('<input class="svelte-1ni6ltu">');function Ot(f,t){let e=j(t,"value",15);const a=typeof e()=="number"?"number":"text";var d=L(),l=h(d);{var s=p=>{var u=Ia();b(u),u.__change=[Da,e],T(u,e),n(p,u)},i=p=>{var u=ka();b(u),T(u,e),n(p,u)};O(l,p=>{a==="number"?p(s):p(i,!1)})}n(f,d)}Z(["change"]);var Ca=D("<td><!></td>"),Ta=D("<td><!></td>");function wa(f,t){F(t,!0);let e=j(t,"values",15),a=Et(()=>Object.keys(e()));var d=L(),l=h(d);xe(l,17,()=>o(a),Ze,(s,i)=>{var p=L(),u=h(p);{var g=v=>{var _=L(),y=h(_);{var I=k=>{var C=Ca(),m=M(C);Ot(m,{get value(){return e()[o(i)]},set value(x){e(e()[o(i)]=x,!0)}}),w(C),n(k,C)};O(y,k=>{t.keys.includes(o(i))&&k(I)})}n(v,_)},c=v=>{var _=Ta(),y=M(_);Ot(y,{get value(){return e()[o(i)]},set value(I){e(e()[o(i)]=I,!0)}}),w(_),n(v,_)};O(u,v=>{t.keys!==null?v(g):v(c,!1)})}n(s,p)}),n(f,d),B()}var Ma=D("<th> </th>"),Aa=(f,t,e)=>{o(t).onClick(o(e))},Pa=D('<input type="image">'),Sa=(f,t,e)=>t(o(e)),La=D('<tr><!><td><!> <input type="image" alt="A bin"></td></tr>'),Oa=D("<table><thead><tr><!><th>Actions</th></tr></thead><tbody></tbody></table>");function xt(f,t){F(t,!0);let e=j(t,"values",31,()=>X([])),a=j(t,"keys",3,null),d=j(t,"actions",19,()=>[]),l=j(t,"itemOnDelete",3,()=>{});function s(v){e().splice(e().indexOf(v),1),e(e()),l()(v)}var i=Oa(),p=M(i),u=M(p),g=M(u);xe(g,17,()=>t.headers,Ze,(v,_)=>{var y=Ma(),I=M(y,!0);w(y),Y(()=>ve(I,o(_))),n(v,y)}),N(),w(u),w(p);var c=r(p);xe(c,21,e,Ze,(v,_,y)=>{var I=La(),k=M(I);wa(k,{get keys(){return a()},get values(){return e()[y]},set values(A){e(e()[y]=A,!0)}});var C=r(k),m=M(C);xe(m,17,d,Ze,(A,S)=>{var P=Pa();P.__click=[Aa,S,_],Y(()=>{H(P,"src",o(S).iconSRC),H(P,"alt",o(S).iconAltText)}),n(A,P)});var x=r(m,2);H(x,"src",`${ue??""}/delete.png`),x.__click=[Sa,s,_],w(C),w(I),n(v,I)}),w(c),w(i),n(f,i),B()}Z(["click"]);const ja=["Currency ID","Quantity"],Ea=["Item ID","Quantity"];function Na(f,t){t().currencies.push({id:"melvorD:GP",quantity:69}),t(t())}function Ra(f,t){t().items.push({id:"melvorD:Red_Party_Hat",quantity:69}),t(t())}var Ha=D('<!> <button class="svelte-119nfsr">Add new Currency</button> <!> <!> <button class="svelte-119nfsr">Add new Item</button> <!>',1);function qa(f,t){F(t,!0);let e=j(t,"costs",31,()=>X({currencies:[],items:[]})),a=j(t,"headerLevel",3,6);var d=Ha(),l=h(d);Lt(l,()=>`h${a()}`,!1,(c,v)=>{St(c,"svelte-119nfsr");var _=te("Currencies");n(v,_)});var s=r(l,2);s.__click=[Na,e];var i=r(s,2);xt(i,{headers:ja,get values(){return e().currencies},set values(c){e(e().currencies=c,!0)}});var p=r(i,2);Lt(p,()=>`h${a()}`,!1,(c,v)=>{St(c,"svelte-119nfsr");var _=te("Items");n(v,_)});var u=r(p,2);u.__click=[Ra,e];var g=r(u,2);xt(g,{headers:Ea,get values(){return e().items},set values(c){e(e().items=c,!0)}}),n(f,d),B()}Z(["click"]);function $a(f,t){f.stopPropagation(),t(!t())}var Fa=D('<div class="container svelte-1gfvt6g"><button class="dropdownButton svelte-1gfvt6g"> <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1gfvt6g"><path d="M8.36612 16.1161C7.87796 16.6043 7.87796 17.3957 8.36612 17.8839L23.1161 32.6339C23.6043 33.122 24.3957 33.122 24.8839 32.6339L39.6339 17.8839C40.122 17.3957 40.122 16.6043 39.6339 16.1161C39.1457 15.628 38.3543 15.628 37.8661 16.1161L24 29.9822L10.1339 16.1161C9.64573 15.628 8.85427 15.628 8.36612 16.1161Z"></path></svg></button> <div class="optionContainer svelte-1gfvt6g"><!></div></div>');function qt(f,t){F(t,!0);let e=j(t,"placeholder",3,""),a=j(t,"value",15,""),d=j(t,"caretFillColour",3,"#000000"),l=j(t,"style",3,""),s=j(t,"showOptions",15,!1),i=j(t,"height",3,10),p=j(t,"onChange",3,()=>{}),u=j(t,"textContent",31,()=>X(a()));Jt("dropdown",{hide:()=>{s(!1)},setValue(C){a(C)},setTextContext(C){u(C)},onChange:p()});var g=Fa(),c=M(g);c.__click=[$a,s];var v=M(c),_=r(v),y=M(_);w(_),w(c);var I=r(c,2),k=M(I);ft(k,()=>t.children??Dt),w(I),w(g),Y(()=>{H(c,"style",l()),ve(v,`${(u()?u():e())??""} `),De(_,"vertical-flip",s()),H(y,"fill",d()),H(I,"style",`max-height: ${i()??""}em; z-index: 10;`),De(I,"hidden",!s())}),n(f,g),B()}Z(["click"]);function Ba(f,t,e){if(o(t)===void 0)return;const a=o(t).value.split(",").map(d=>d.trimStart()).filter(d=>d!=="");e(a)}var Wa=D("<input>");function jt(f,t){F(t,!0);let e=j(t,"value",31,()=>X([])),a=j(t,"placeholder",3,""),d=V(X(e().join(","))),l=V(void 0);var s=Wa();b(s),s.__change=[Ba,l,e],le(s,i=>$(l,i),()=>o(l)),Y(()=>H(s,"placeholder",a())),T(s,()=>o(d),i=>$(d,i)),n(f,s),B()}Z(["change"]);var Xa=D(`The depth <input list="abyssDepths"> must
  be completed at least <input type="number" step="1" min="1"> times`,1),Ya=D(`The skill <input list="skillIDs"> must have
  at least abyssal level <input type="number" step="1" min="1">`,1),Ua=D('Every skill must be at least level <input type="number" step="1" min="1"> except the (comma seperated) skills <!>. This only includes skills under the namespace <input placeholder="(Optional)">',1),Ga=D('A minimum of <input type="number" min="1" step="1"> items must be donated to the Archaeology Museum',1),Va=D('A minimum of <input type="number" min="1" step="1"> hexes must be fully surveyed in the Cartography Map <input list="worldMapIDs">',1),Ka=D('The (comma seperated) points of interest <!> must be discovered in the Cartography Map <input list="worldMapIDs">',1),Qa=D('A minimum of <input type="number" min="0" max="100"> percent completion must be achieved in the namespace <input list="namespaces">',1),za=D('The dungeon <input list="dungeonIDs"> must be cleared at least <input type="number" min="1" step="1"> times',1),Za=D(`The item <input> must have been found at least
  once`,1),Ja=D('The action <input> in the skill <input list="skillIDs"> must be at least mastery level <input type="number" min="1" step="1">',1),er=D(`The monster <input> must be killed at
  least <input type="number" min="1" step="1"> times`,1),tr=D(`The shop purchase <input> must be
  purchased at least <input type="number" min="1" step="1"> times`,1),ar=D(`The skill <input list="skillIDs"> must be
  at least level <input type="number" min="1" step="1">`,1),rr=D("The skill tree <input> for the skill <input> must have the node <input> unlocked",1),nr=D("The item <input> must currently be equipped",1),sr=D('A minimum of <input type="number" min="1" step="1"> slayer tasks in the slayer category <input> must be completed',1),or=D(`A minimum of <input type="number" min="1" step="1"> township building <input> must be actively
  built`,1),lr=D('A minimum of <input type="number" min="1" step="1"> township tasks attached to the realm <input placeholder="(Optional)" list="realms"> must be completed',1);function ir(f,t){F(t,!0);let e=j(t,"requirement",15);var a=L(),d=h(a);{var l=i=>{var p=Xa(),u=r(h(p));b(u);var g=r(u,2);b(g),N(),T(u,()=>e().depthID,c=>e(e().depthID=c,!0)),T(g,()=>e().count,c=>e(e().count=c,!0)),n(i,p)},s=i=>{var p=L(),u=h(p);{var g=v=>{var _=Ya(),y=r(h(_));b(y);var I=r(y,2);b(I),T(y,()=>e().skillID,k=>e(e().skillID=k,!0)),T(I,()=>e().level,k=>e(e().level=k,!0)),n(v,_)},c=v=>{var _=L(),y=h(_);{var I=C=>{var m=Ua(),x=r(h(m));b(x);var A=r(x,2);jt(A,{placeholder:"(Optional)",get value(){return e().exceptions},set value(P){e(e().exceptions=P,!0)}});var S=r(A,2);b(S),T(x,()=>e().level,P=>e(e().level=P,!0)),T(S,()=>e().namespace,P=>e(e().namespace=P,!0)),n(C,m)},k=C=>{var m=L(),x=h(m);{var A=P=>{var R=Ga(),ne=r(h(R));b(ne),N(),T(ne,()=>e().count,q=>e(e().count=q,!0)),n(P,R)},S=P=>{var R=L(),ne=h(R);{var q=J=>{var ae=Va(),re=r(h(ae));b(re);var ce=r(re,2);b(ce),T(re,()=>e().count,K=>e(e().count=K,!0)),T(ce,()=>e().worldMapID,K=>e(e().worldMapID=K,!0)),n(J,ae)},It=J=>{var ae=L(),re=h(ae);{var ce=ee=>{var Q=Ka(),et=r(h(Q));jt(et,{get value(){return e().poiIDs},set value(Ie){e(e().poiIDs=Ie,!0)}});var tt=r(et,2);b(tt),T(tt,()=>e().worldMapID,Ie=>e(e().worldMapID=Ie,!0)),n(ee,Q)},K=ee=>{var Q=L(),et=h(Q);{var tt=de=>{var ke=Qa(),Ce=r(h(ke));b(Ce);var at=r(Ce,2);b(at),T(Ce,()=>e().percent,Te=>e(e().percent=Te,!0)),T(at,()=>e().namespace,Te=>e(e().namespace=Te,!0)),n(de,ke)},Ie=de=>{var ke=L(),Ce=h(ke);{var at=pe=>{var we=za(),Me=r(h(we));b(Me);var rt=r(Me,2);b(rt),N(),T(Me,()=>e().dungeonID,Ae=>e(e().dungeonID=Ae,!0)),T(rt,()=>e().count,Ae=>e(e().count=Ae,!0)),n(pe,we)},Te=pe=>{var we=L(),Me=h(we);{var rt=me=>{var Pe=Za(),nt=r(h(Pe));b(nt),N(),T(nt,()=>e().itemID,_t=>e(e().itemID=_t,!0)),n(me,Pe)},Ae=me=>{var Pe=L(),nt=h(Pe);{var _t=fe=>{var Se=Ja(),Le=r(h(Se));b(Le);var Oe=r(Le,2);b(Oe);var st=r(Oe,2);b(st),T(Le,()=>e().actionID,U=>e(e().actionID=U,!0)),T(Oe,()=>e().skillID,U=>e(e().skillID=U,!0)),T(st,()=>e().level,U=>e(e().level=U,!0)),n(fe,Se)},$t=fe=>{var Se=L(),Le=h(Se);{var Oe=U=>{var je=er(),Ee=r(h(je));b(Ee);var ot=r(Ee,2);b(ot),N(),T(Ee,()=>e().monsterID,Ne=>e(e().monsterID=Ne,!0)),T(ot,()=>e().count,Ne=>e(e().count=Ne,!0)),n(U,je)},st=U=>{var je=L(),Ee=h(je);{var ot=_e=>{var Re=tr(),He=r(h(Re));b(He);var lt=r(He,2);b(lt),N(),T(He,()=>e().purchaseID,qe=>e(e().purchaseID=qe,!0)),T(lt,()=>e().count,qe=>e(e().count=qe,!0)),n(_e,Re)},Ne=_e=>{var Re=L(),He=h(Re);{var lt=he=>{var $e=ar(),Fe=r(h($e));b(Fe);var it=r(Fe,2);b(it),T(Fe,()=>e().skillID,Be=>e(e().skillID=Be,!0)),T(it,()=>e().level,Be=>e(e().level=Be,!0)),n(he,$e)},qe=he=>{var $e=L(),Fe=h($e);{var it=ge=>{var We=rr(),Xe=r(h(We));b(Xe);var Ye=r(Xe,2);b(Ye);var ut=r(Ye,2);b(ut),N(),T(Xe,()=>e().skillTreeID,G=>e(e().skillTreeID=G,!0)),T(Ye,()=>e().skillID,G=>e(e().skillID=G,!0)),T(ut,()=>e().nodeID,G=>e(e().nodeID=G,!0)),n(ge,We)},Be=ge=>{var We=L(),Xe=h(We);{var Ye=G=>{var Ue=nr(),vt=r(h(Ue));b(vt),N(),T(vt,()=>e().itemID,ht=>e(e().itemID=ht,!0)),n(G,Ue)},ut=G=>{var Ue=L(),vt=h(Ue);{var ht=ye=>{var Ge=sr(),Ve=r(h(Ge));b(Ve);var ct=r(Ve,2);b(ct),N(),T(Ve,()=>e().count,Ke=>e(e().count=Ke,!0)),T(ct,()=>e().category,Ke=>e(e().category=Ke,!0)),n(ye,Ge)},Ft=ye=>{var Ge=L(),Ve=h(Ge);{var ct=be=>{var Qe=or(),ze=r(h(Qe));b(ze);var dt=r(ze,2);b(dt),N(),T(ze,()=>e().count,se=>e(e().count=se,!0)),T(dt,()=>e().buildingID,se=>e(e().buildingID=se,!0)),n(be,Qe)},Ke=be=>{var Qe=L(),ze=h(Qe);{var dt=se=>{var kt=lr(),gt=r(h(kt));b(gt);var Ct=r(gt,2);b(Ct),N(),T(gt,()=>e().count,yt=>e(e().count=yt,!0)),T(Ct,()=>e().realm,yt=>e(e().realm=yt,!0)),n(se,kt)};O(ze,se=>{e().type==="TownshipTask"&&se(dt)},!0)}n(be,Qe)};O(Ve,be=>{e().type==="TownshipBuilding"?be(ct):be(Ke,!1)},!0)}n(ye,Ge)};O(vt,ye=>{e().type==="SlayerTask"?ye(ht):ye(Ft,!1)},!0)}n(G,Ue)};O(Xe,G=>{e().type==="SlayerItem"?G(Ye):G(ut,!1)},!0)}n(ge,We)};O(Fe,ge=>{e().type==="SkillTreeNodeUnlocked"?ge(it):ge(Be,!1)},!0)}n(he,$e)};O(He,he=>{e().type==="SkillLevel"?he(lt):he(qe,!1)},!0)}n(_e,Re)};O(Ee,_e=>{e().type==="ShopPurchase"?_e(ot):_e(Ne,!1)},!0)}n(U,je)};O(Le,U=>{e().type==="MonsterKilled"?U(Oe):U(st,!1)},!0)}n(fe,Se)};O(nt,fe=>{e().type==="MasteryLevel"?fe(_t):fe($t,!1)},!0)}n(me,Pe)};O(Me,me=>{e().type==="ItemFound"?me(rt):me(Ae,!1)},!0)}n(pe,we)};O(Ce,pe=>{e().type==="DungeonCompletion"?pe(at):pe(Te,!1)},!0)}n(de,ke)};O(et,de=>{e().type==="Completion"?de(tt):de(Ie,!1)},!0)}n(ee,Q)};O(re,ee=>{e().type==="CartographyPOIDiscovery"?ee(ce):ee(K,!1)},!0)}n(J,ae)};O(ne,J=>{e().type==="CartographyHexDiscovery"?J(q):J(It,!1)},!0)}n(P,R)};O(x,P=>{e().type==="ArchaeologyItemsDonated"?P(A):P(S,!1)},!0)}n(C,m)};O(y,C=>{e().type==="AllSkillLevels"?C(I):C(k,!1)},!0)}n(v,_)};O(u,v=>{e().type==="AbyssalLevel"?v(g):v(c,!1)},!0)}n(i,p)};O(d,i=>{e().type==="AbyssDepthCompletion"?i(l):i(s,!1)})}n(f,a),B()}function ur(f,t,e,a,d){f.stopPropagation(),o(t)!==void 0&&(e.setValue(a.value),e.setTextContext(d||(o(t).textContent??"")),e.onChange(a.value),e.hide())}var vr=D('<button class="svelte-14brqms"><!></button>');function pt(f,t){F(t,!0);const e=ea("dropdown");let a=V(void 0),d=t.value;var l=vr();l.__click=[ur,a,e,t,d];var s=M(l);{var i=u=>{var g=L(),c=h(g);ft(c,()=>t.children),n(u,g)},p=u=>{var g=te();Y(()=>ve(g,t.value)),n(u,g)};O(s,u=>{t.children?u(i):u(p,!1)})}w(l),le(l,u=>$(a,u),()=>o(a)),n(f,l),B()}Z(["click"]);const cr=["Abyss Depth Completion","All Skill Levels","Archaeology Items Donated","Cartography Hex Discovery","Cartography POI Discovery","Completion","Dungeon Completion","Item Found","Mastery Level","Monster Killed","Shop Purchase","Skill Level","Skill Tree Node Unlocked","Slayer Item","Slayer Task","Township Building","Township Task"];function dr(f,t,e){const a=o(t);a!==""&&(e().push((()=>{switch(a){case"SkillLevel":return{type:a,skillID:"melvorD:Woodcutting",level:1};case"AllSkillLevels":return{type:a,level:1,namespace:"melvorTrue",exceptions:[]};case"DungeonCompletion":return{type:a,dungeonID:"melvorD:Chicken_Coop",count:1};case"Completion":return{type:a,percent:0,namespace:"melvorTrue"};case"ShopPurchase":return{type:a,purchaseID:"Extra_Bank_Slot",count:1};case"SlayerItem":return{type:a,itemID:"melvorD:Red_Party_Hat"};case"SlayerTask":return{type:a,category:"melvorF:Easy",count:1};case"ItemFound":return{type:a,itemID:"melvorD:Red_Party_Hat"};case"MonsterKilled":return{type:a,monsterID:"melvorD:Golbin",count:1};case"TownshipTask":return{type:a,realm:"melvorD:Melvor",count:1};case"TownshipBuilding":return{type:a,buildingID:"melvorF:Malcs_Cats",count:1};case"CartographyHexDiscovery":return{type:a,worldMapID:"melvorAoD:Lemvor",count:1};case"CartographyPOIDiscovery":return{type:a,worldMapID:"melvorAoD:Lemvor",poiIDs:[]};case"ArchaeologyItemsDonated":return{type:a,count:1};case"AbyssalLevel":return{type:a,skillID:"melvorD:Woodcutting",level:1};case"SkillTreeNodeUnlocked":return{type:a,skillID:"melvorD:Woodcutting",skillTreeID:"melvorItA:Abyssal",nodeID:"melvorItA:NodeA1"};case"AbyssDepthCompletion":return{type:a,depthID:"melvorItA:Depth1",count:1};case"MasteryLevel":return{type:a,skillID:"melvorD:Woodcutting",actionID:"melvorD:Normal",level:1}}})()),e(e()))}var pr=(f,t,e)=>t(o(e)),mr=D('<tr><td><!></td><td><input type="image" alt="A bin"></td></tr>'),fr=D('<div class="new-requirement-container"><p>Add new Requirement:</p> <div class="dropdown-container"><!> <button>Add!</button></div></div> <table><thead><tr><th>Requirement</th><th>Actions</th></tr></thead><tbody></tbody></table>',1);function _r(f,t){F(t,!0);let e=j(t,"requirements",31,()=>X([])),a=V("");function d(v){e().splice(e().indexOf(v),1),e(e())}var l=fr(),s=h(l),i=r(M(s),2),p=M(i);qt(p,{placeholder:"Select a requirement type",get value(){return o(a)},set value(v){$(a,X(v))},children:(v,_)=>{var y=L(),I=h(y);xe(I,16,()=>cr,k=>k,(k,C)=>{var m=Et(()=>C.replaceAll(" ",""));pt(k,{get value(){return o(m)},children:(x,A)=>{N();var S=te();Y(()=>ve(S,C)),n(x,S)},$$slots:{default:!0}})}),n(v,y)},$$slots:{default:!0}});var u=r(p,2);u.__click=[dr,a,e],w(i),w(s);var g=r(s,2),c=r(M(g));xe(c,21,e,Ze,(v,_)=>{var y=mr(),I=M(y),k=M(I);ir(k,{get requirement(){return o(_)}}),w(I);var C=r(I),m=M(C);H(m,"src",`${ue??""}/delete.png`),m.__click=[pr,d,_],w(C),w(y),n(v,y)}),w(c),w(g),n(f,l),B()}Z(["click"]);var hr=D('<h3 class="svelte-9bogyj"> </h3> <label for="maxSurveyLevel" class="svelte-9bogyj">Max Survey Level:</label> <input type="number" id="maxSurveyLevel" min="1" step="1" class="svelte-9bogyj"> <br> <label for="maxMasteryLevel" class="svelte-9bogyj">Max Mastery Level:</label> <input type="number" id="maxMasteryLevel" step="1" class="svelte-9bogyj"> <br> <div class="center svelte-9bogyj"><label for="isWater" class="svelte-9bogyj">Is water?</label> <input type="checkbox" id="isWater" class="svelte-9bogyj"></div> <h4 class="svelte-9bogyj">Requirements:</h4> <!> <h4 class="svelte-9bogyj">Travel Costs</h4> <!>',1),gr=D('<h3 class="svelte-9bogyj">No hex selected!</h3>'),yr=D("<!> <br> <br>",1);function br(f,t){F(t,!0);const e=Je(),a=()=>ie(W,"$store",e),d=()=>ie(l,"$data",e),l=va(W,i=>i.propertiesMenu.hexTab);let s=V(void 0);l.subscribe(()=>{var i;$(s,X((i=a().hexGridLayer.children.find(p=>p.coordinates.x===d().activeHex.x&&p.coordinates.y===d().activeHex.y))==null?void 0:i.hex))}),Ht(f,{imageSRC:`${ue??""}/hex_grid.png`,imageAltText:"A hex grid",children:(i,p)=>{var u=yr(),g=h(u);{var c=_=>{var y=hr(),I=h(y),k=M(I);w(I);var C=r(I,4);b(C);var m=r(C,6);b(m);var x=r(m,4),A=r(M(x),2);b(A),w(x);var S=r(x,4);_r(S,{get requirements(){return o(s).requirements},set requirements(R){o(s).requirements=R}});var P=r(S,4);qa(P,{get costs(){return o(s).travelCost},set costs(R){o(s).travelCost=R}}),Y(()=>{ve(k,`Editing Hex: (${d().activeHex.x??""}, ${d().activeHex.y??""})`),H(C,"max",o(s).maxMasteryLevel),H(m,"min",o(s).maxSurveyLevel)}),T(C,()=>o(s).maxSurveyLevel,R=>o(s).maxSurveyLevel=R),T(m,()=>o(s).maxMasteryLevel,R=>o(s).maxMasteryLevel=R),la(A,()=>o(s).isWater,R=>o(s).isWater=R),n(_,y)},v=_=>{var y=gr();n(_,y)};O(g,_=>{o(s)!==void 0?_(c):_(v,!1)})}N(4),n(i,u)},$$slots:{default:!0}}),B()}function xr(f,t){const e=Math.random().toFixed(6).slice(2);t().activeProject.worldMapData.pointsOfInterest.push({id:`placeholder_${e}`,type:"Other",coords:{x:0,y:0},name:"placeholder",description:"placeholder",media:"assets/placeholder.png",activeStats:{},fastTravel:{groupID:"placeholder",unlockCosts:{currencies:[],items:[]}},discoveryModifiers:{moves:1,modifiers:{}},discoveryRewards:{currencies:[],items:[]},hidden:{requirements:[],itemsWorn:[],showMarker:!1}}),z(mt,E(t).activeProject.worldMapData.pointsOfInterest=t().activeProject.worldMapData.pointsOfInterest,E(t))}function Dr(f,t){z(mt,E(t).activeProject.worldMapData.pointsOfInterest=t().activeProject.worldMapData.pointsOfInterest,E(t))}var Ir=D("<!> <!> <!>",1),kr=D('<h2 class="svelte-2j4mox"> </h2> <label for="poiName">Name:</label> <input id="poiName" name="poiName"> <br> <label for="poiID">Local ID:</label> <input id="poiID" name="poiID"> <br> <p>Coordinates:</p> <label for="poiX" class="monospace svelte-2j4mox">X:</label> <input id="poiX" name="poiX" type="number" step="1" min="0" class="svelte-2j4mox"> <br> <label for="poiY" class="monospace svelte-2j4mox">Y:</label> <input id="poiY" name="poiY" type="number" step="1" min="0" class="svelte-2j4mox"> <br> <p>Type:</p> <!> <br> <label for="poiMedia">Media:</label> <input id="poiMedia" name="poiMedia">',1),Cr=D('<h1 class="svelte-2j4mox">Points of Interest</h1> <button class="svelte-2j4mox">Create new POI</button> <!> <!>',1);function Tr(f,t){F(t,!0);const e=Je(),a=()=>ie(W,"$mapBuilderStore",e),d=()=>ie(mt,"$globalStore",e);let l=V(void 0);ta(()=>{$(l,X(a().propertiesMenu.poiTab.activePOI))});function s(p){const u=p;z(W,E(a).propertiesMenu.poiTab.activePOI=u,E(a))}function i(p){o(l)===p&&$(l,null)}Ht(f,{imageSRC:`${ue??""}/point_of_interest.png`,imageAltText:"A yellow flag",children:(p,u)=>{var g=Cr(),c=r(h(g),2);c.__click=[xr,d];var v=r(c,2);xt(v,{headers:["Local ID"],keys:["id"],itemOnDelete:i,actions:[{iconSRC:`${ue}/edit.png`,iconAltText:"A pen",onClick:s}],get values(){return d().activeProject.worldMapData.pointsOfInterest},set values(I){z(mt,E(d).activeProject.worldMapData.pointsOfInterest=I,E(d))}});var _=r(v,2);{var y=I=>{var k=kr(),C=h(k),m=M(C,!0);w(C);var x=r(C,4);b(x);var A=r(x,6);b(A),A.__input=[Dr,d];var S=r(A,8);b(S);var P=r(S,6);b(P);var R=r(P,6);qt(R,{get value(){return o(l).type},set value(q){o(l).type=q},children:(q,It)=>{var J=Ir(),ae=h(J);pt(ae,{value:"Other",children:(K,ee)=>{N();var Q=te("Standard");n(K,Q)},$$slots:{default:!0}});var re=r(ae,2);pt(re,{value:"DigSite",children:(K,ee)=>{N();var Q=te("Dig Site");n(K,Q)},$$slots:{default:!0}});var ce=r(re,2);pt(ce,{value:"Watchtower",children:(K,ee)=>{N();var Q=te("Watchtower");n(K,Q)},$$slots:{default:!0}}),n(q,J)},$$slots:{default:!0}});var ne=r(R,6);b(ne),Y(()=>{ve(m,o(l).name),H(S,"max",a().hexesX-1),H(P,"max",a().hexesY-1)}),T(x,()=>o(l).name,q=>o(l).name=q),T(A,()=>o(l).id,q=>o(l).id=q),T(S,()=>o(l).coords.x,q=>o(l).coords.x=q),T(P,()=>o(l).coords.y,q=>o(l).coords.y=q),T(ne,()=>o(l).media,q=>o(l).media=q),n(I,k)};O(_,I=>{o(l)!==null&&o(l)!==void 0&&I(y)})}n(p,g)},$$slots:{default:!0}}),B()}Z(["click","input"]);var wr=D('<div class="container svelte-1qixbrx"><!> <!></div>');function Mr(f,t){F(t,!0);let e=j(t,"hidden",7,!1);var a=wr(),d=M(a);br(d,{});var l=r(d,2);return Tr(l,{}),w(a),Y(()=>De(a,"hidden",e())),n(f,a),B({get hidden(){return e()},set hidden(s){e(s)}})}var Ar=D(`<style lang="scss" class="svelte-10b6in0">body {
  margin: auto 0;
  overflow: hidden;
}</style>`),Pr=D("<!> <!>",1),Sr=D('<div class="container svelte-10b6in0"><!> <!> <!> <div class="main svelte-10b6in0"><!> <!></div></div>');function Qr(f,t){F(t,!0);let e=V(void 0),a=V(void 0);var d=Sr();aa(c=>{var v=Ar();n(c,v)});var l=M(d);oa(l,{children:(c,v)=>{var _=Pr(),y=h(_);Pt(y,{imageSRC:`${ue??""}/upload.png`,imageAltText:"An upload icon",onClick:()=>{var k,C;(C=(k=o(e))==null?void 0:k.exports.modal)==null||C.toggle()},children:(k,C)=>{N();var m=te("Upload Map Images");n(k,m)},$$slots:{default:!0}});var I=r(y,2);Pt(I,{imageSRC:`${ue??""}/hex_grid.png`,imageAltText:"A honeycomb",onClick:()=>{var k,C;(C=(k=o(a))==null?void 0:k.exports.modal)==null||C.toggle()},children:(k,C)=>{N();var m=te("Hexes");n(k,m)},$$slots:{default:!0}}),n(c,_)},$$slots:{default:!0}});var s=r(l,2);le(ha(s,{}),c=>$(e,X(c)),()=>o(e));var i=r(s,2);le(ma(i,{}),c=>$(a,X(c)),()=>o(a));var p=r(i,2),u=M(p);ft(u,()=>t.children??Dt);var g=r(u,2);Mr(g,{}),w(p),w(d),n(f,d),B()}export{Qr as component};
