import{a as O,c as j,u as A,g as E,b as H,d as q,e as y}from"../chunks/scheduler.CEYuN9sw.js";import{S as U,i as V,e as v,c as w,s as D,a as I,b as T,d as k,f as L,g as p,h as u,j as S,m as P,k as b,t as $,l as d,n as R,o as z,p as G}from"../chunks/index.C0VDjlZ-.js";import{b as C}from"../chunks/paths.B2PhKPhy.js";import{r as M}from"../chunks/imageUtils.1uU9xnWy.js";import{s as B}from"../chunks/store.Do3jgaeQ.js";import{D as F}from"../chunks/Dialog.Cj81w0u7.js";import{T as J,a as K}from"../chunks/ToolbarItem.DTg_APkh.js";function N(o){let e;return{c(){e=z("Preview Image")},l(s){e=G(s,"Preview Image")},m(s,n){S(s,e,n)},d(s){s&&p(e)}}}function Q(o){var n;let e,s;return e=new K({props:{imageSRC:C+"/preview.png",imageAltText:"A document and a magnifying glass",imageOnClick:(n=o[0])==null?void 0:n.toggle,$$slots:{default:[N]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},l(a){k(e.$$.fragment,a)},m(a,f){P(e,a,f),s=!0},p(a,f){var c;const i={};f&1&&(i.imageOnClick=(c=a[0])==null?void 0:c.toggle),f&64&&(i.$$scope={dirty:f,ctx:a}),e.$set(i)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function W(o){let e,s;return{c(){e=v("img"),this.h()},l(n){e=I(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){y(e.src,s=o[2])||u(e,"src",s),u(e,"alt","Preview"),u(e,"class","preview svelte-1trgvqr")},m(n,a){S(n,e,a),o[4](e)},p(n,a){a&4&&!y(e.src,s=n[2])&&u(e,"src",s)},d(n){n&&p(e),o[4](null)}}}function X(o){let e,s,n,a,f,i,c;s=new J({props:{$$slots:{default:[Q]},$$scope:{ctx:o}}});let h={$$slots:{default:[W]},$$scope:{ctx:o}};a=new F({props:h}),o[5](a);const g=o[3].default,l=j(g,o,o[6],null);return{c(){e=v("div"),w(s.$$.fragment),n=D(),w(a.$$.fragment),f=D(),i=v("div"),l&&l.c(),this.h()},l(t){e=I(t,"DIV",{class:!0});var r=T(e);k(s.$$.fragment,r),n=L(r),k(a.$$.fragment,r),f=L(r),i=I(r,"DIV",{class:!0});var m=T(i);l&&l.l(m),m.forEach(p),r.forEach(p),this.h()},h(){u(i,"class","main"),u(e,"class","container svelte-1trgvqr")},m(t,r){S(t,e,r),P(s,e,null),b(e,n),P(a,e,null),b(e,f),b(e,i),l&&l.m(i,null),c=!0},p(t,[r]){const m={};r&65&&(m.$$scope={dirty:r,ctx:t}),s.$set(m);const _={};r&70&&(_.$$scope={dirty:r,ctx:t}),a.$set(_),l&&l.p&&(!c||r&64)&&A(l,g,t,t[6],c?H(g,t[6],r,null):E(t[6]),null)},i(t){c||($(s.$$.fragment,t),$(a.$$.fragment,t),$(l,t),c=!0)},o(t){d(s.$$.fragment,t),d(a.$$.fragment,t),d(l,t),c=!1},d(t){t&&p(e),R(s),o[5](null),R(a),l&&l.d(t)}}}function Y(o,e,s){let{$$slots:n={},$$scope:a}=e,f,i,c=`${C}/black.png`;async function h(t){if(URL.revokeObjectURL(c),t===null){s(2,c=`${C}/black.png`);return}const r=document.body.offsetHeight*.75*devicePixelRatio,m=document.body.offsetHeight*.75*devicePixelRatio,_=await M(t,{type:"to",x:r,y:m},"url");s(2,c=_)}B.subscribe(t=>{h(t.mapImage)});function g(t){q[t?"unshift":"push"](()=>{i=t,s(1,i)})}function l(t){q[t?"unshift":"push"](()=>{f=t,s(0,f)})}return o.$$set=t=>{"$$scope"in t&&s(6,a=t.$$scope)},[f,i,c,n,g,l,a]}class ne extends U{constructor(e){super(),V(this,e,Y,X,O,{})}}export{ne as component};
